<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Wine not</title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
        <link rel="stylesheet" href="../static/style.css">
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-12 jumbotron text-left title_box">
                    <h1 class="titleFont" style="color:#800000;">Wine not?</h1>
                </div>
            </div>
            <div class="row">
                <h1 class="title">Welcome to the wonderful world of wine</h1>
                <h4 class="site-intro">Explore some of the best wines in the world through our interactive dashboard.</h4>
            </div>
            <div class="row">
                <div class="col-md-5">
                    <div class="well">
                        <h4 style="color: white;">Select Wine Variety:</h4>
                        <select id="varietyDataset" onchange="varietyOptionsChanged(this.value)"></select>
                    </div>
                </div>
                <div class="col-md-2"></div>
                <div class="col-md-5">
                    <div class="well">
                        <h4 style="color: white;">Select Geographic Region</h4>
                        <select id="regionDataset" onchange="regionOptionsChanged(this.value)"></select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class = "col-md-6">
                    <div id="pie">
                        <h3>The Pie Chart Goes Here</h3>
                    </div>
                </div>
                <div class="col-md-6">
                    <div id="bubble">
                        <h3>The Bubble Chart Goes Here</h3>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <p class="quote">“Wine is one of the most civilized things in the world and one of the most natural things of the world that has been brought to the greatest perfection, and it offers a greater range for enjoyment and appreciation than, possibly, any other purely sensory thing.”</p>
                    <p class="quote_attribute">-Ernest Hemingway</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div id="map"  > </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <p>UCBerckly Data Analytics Project 2</p>
            <p>Project 2</p>
        </div>
        <script>
            // reference to the dropdown select tag
                var varietySelector = document.getElementById('varietyDataset');

                // read in the data to populate the dropdown
                Plotly.d3.json('/varieties', function(error, sampleNames){
                    for (var i=0; i < sampleNames.length; i++) {
                        var currentOption = document.createElement('option');
                        currentOption.text = sampleNames[i];
                        currentOption.value = sampleNames[i];
                        varietySelector.appendChild(currentOption);
                    }
                });
                // reference to the dropdown select tag
                var regionSelector = document.getElementById('regionDataset');

                // read in the data to populate the dropdown
                Plotly.d3.json('/region', function(error, sampleNames){
                    for (var i=0; i < sampleNames.length; i++) {
                        var currentOption = document.createElement('option');
                        currentOption.text = sampleNames[i];
                        currentOption.value = sampleNames[i];
                        regionSelector.appendChild(currentOption);
                    }
                });
            function varietyOptionsChanged() {
                // reference to the dropdown select tag
                var selector = document.getElementById('varietyDataset');

                // read in the data to populate the dropdown
                Plotly.d3.json('/varieties/'+selector.value(), function(error, sampleNames){
                    for (var i=0; i < sampleNames.length; i++) {
                        var currentOption = document.createElement('option');
                        currentOption.text = sampleNames[i];
                        currentOption.value = sampleNames[i];
                        selector.appendChild(currentOption);
                    }
                });
            }
            function regionOptionsChanged() {
                // reference to the dropdown select tag
                var selector = document.getElementById('regionDataset');

                // read in the data to populate the dropdown
                Plotly.d3.json('/region', function(error, sampleNames){
                    for (var i=0; i < sampleNames.length; i++) {
                        var currentOption = document.createElement('option');
                        currentOption.text = sampleNames[i];
                        currentOption.value = sampleNames[i];
                        selector.appendChild(currentOption);
                    }
                });
            }
        </script>
        <!-- D3 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script>

    <!-- Leaflet JavaScript-->
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    
    <!-- Our JS -->
    <script type="text/javascript" src="../static/logic.js">
    </script>

    </body>
</html>